<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
  <link href="assets/css/custom.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: NiceAdmin
  * Updated: Nov 17 2023 with Bootstrap v5.3.2
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top align-items-center topbar">
    <nav class="navbar top-navbar navbar-expand-md navbar-light">
      <div class="d-flex align-items-center justify-content-between logo-navbar">
        <a href="index.html" class="logo d-flex align-items-center">
          <img src="assets/img/logo10.jpeg" alt="">

        </a>

      </div><!-- End Logo -->
      <div class="navbar-collapse">
        <ul class="navbar-nav mr-auto mt-md-0">
          <li class="nav-item"> <a class="nav-link sidebartoggler hidden-sm-down text-muted waves-effect waves-dark"
              href="javascript:void(0)"><i class="bi bi-list toggle-sidebar-btn"></i></a> </li>
          <li class="nav-item">
            <div class="search-bar">
              <form class="search-form d-flex align-items-center" method="POST" action="#">
                <button type="submit" title="Search"><i class="bi bi-search"></i></button>
                <input type="text" name="query" placeholder="Search" title="Enter search keyword">

              </form>
            </div><!-- End Search Bar -->
          </li>
        </ul>
        <ul class="navbar-nav my-lg-0 p-r-20">
          <li class="nav-item dropdown">
            <a class="nav-link text-muted text-muted waves-effect waves-dark" href="#" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false"> <i class="bi bi-gear"></i>

            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link text-muted text-muted waves-effect waves-dark" href="#" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false"> <i class="bi bi-bell"></i>
              <div class="notifey"> <span class="heartbit"></span> <span class="point"></span> </div>
            </a>
          </li>
          <li class="nav-item dropdown">

            <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
              <p class="userDetail">
                <span id="full_name" class="d-none d-md-block"></span>
                <label class="position">Regional Manager</label>
              </p>

              <img src="assets/img/profile-img.jpg" alt="Profile" class="rounded-circle dropdown-toggle">
              <!-- <i class="bi bi-chevron-down ms-auto"></i> -->
            </a><!-- End Profile Iamge Icon -->
            <!--
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
              <li class="dropdown-header">
                <h6>Kevin Anderson</h6>
                <span>Web Designer</span>
              </li>
              <li>
                <hr class="dropdown-divider">
              </li>
  
              <li>
                <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
                  <i class="bi bi-person"></i>
                  <span>My Profile</span>
                </a>
              </li>
              <li>
                <hr class="dropdown-divider">
              </li>
  
              <li>
                <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
                  <i class="bi bi-gear"></i>
                  <span>Account Settings</span>
                </a>
              </li>
              <li>
                <hr class="dropdown-divider">
              </li>
  
              <li>
                <a class="dropdown-item d-flex align-items-center" href="pages-faq.html">
                  <i class="bi bi-question-circle"></i>
                  <span>Need Help?</span>
                </a>
              </li>
              <li>
                <hr class="dropdown-divider">
              </li>
  
              <li>
                <a class="dropdown-item d-flex align-items-center" href="#">
                  <i class="bi bi-box-arrow-right"></i>
                  <span>Sign Out</span>
                </a>
              </li>
  
        </ul>--><!-- End Profile Dropdown Items -->
          </li><!-- End Profile Nav -->
        </ul>


      </div>
    </nav>
  </header><!-- End Header -->

  <!-- ======= Sidebar ======= -->
  <aside id="sidebar" class="sidebar">

    <ul class="sidebar-nav" id="sidebar-nav">

      <li class="nav-item">
        <a class="nav-link collapsed" href="dashboard.html">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li><!-- End Dashboard Nav -->

      <li class="nav-item">
        <!-- <a class="nav-link collapsed" href="https://cbms.buildint.co"> -->
        <a class="nav-link collapsed active" href="index.html">
          <i class="bi bi-geo-alt-fill"></i>
          <span>My Location</span>
        </a>
      </li><!-- End Dashboard Nav -->

      <!-- <li class="nav-item">
        <a class="nav-link collapsed" href="#">
          <i class="bi-person-bounding-box"></i>
          <span>User management</span>
        </a>
      </li> -->

      <li class="nav-item">
        <a class="nav-link collapsed" href="pages-login.html">
          <i class="bi bi-file-bar-graph"></i>
          <span>Log Out</span>
        </a>
      </li><!-- End Login Page Nav -->

  </aside><!-- End Sidebar-->

  <main id="main" class="main">

    <section class="section mt-4">
      <div class="card">
        <h3 class="ms-3 me-3 mt-3">UPLOAD BILLS</h3>
        <hr class="line" />
        <style>
          .line {
            border: none;
            border-top: 1px solid #000;
            /* Change the color as desired */
            margin: 20px 0;

          }

          /* Styling for the drop zone */
          #drop-zone {
            width: 500px;
            height: 400px;
            border: 2px dashed #ccc;
            border-radius: 8px;
            text-align: center;
            padding: 70px;
            margin-right: 50px;

            margin: 50px;
          }

          #drop-zones {
            width: 500px;
            height: 20px;
            border: 2px dashed #ccc;
            border-radius: 8px;
            text-align: center;
            padding: 70px;
            margin-right: 50px;
          }

          #drop-zone.hover {
            border-color: #333;
          }
        </style>

        <div class="row">
          <div class="col-6">
            <div class="ms-3 drop-zones-container d-flex justify-content-center" id="drop-zones-container">
              <label style="cursor: pointer;" for="file-input" class="drop-zone" id="drop-zone">
                <!-- <i class='bx bx-receipt' style="font-size: 200px;"></i> -->
                <img style="height: auto; width: 250px;" src="assets/img/Upload.png">
                <p style="font-weight: 900;">Click to Browse PDF files</p>
                <input type="file" id="file-input" style="display: none;" multiple>
              </label>
            </div>
          </div>
          <div class="col-6">
            <div class="row ms-3 me-3 mb-5" id="console-data">

            </div>
          </div>
        </div>

      </div>
</body>

</section>

</main><!-- End #main -->

<!-- ======= Footer ======= -->
<footer id="footer" class="footer">
  <div class="copyright">
    &copy; Copyright <strong><span>BuildINT</span></strong>. All Rights Reserved
  </div>
</footer><!-- End Footer -->

<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
    class="bi bi-arrow-up-short"></i></a>

<!-- Vendor JS Files -->
<script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/chart.js/chart.umd.js"></script>
<script src="assets/vendor/echarts/echarts.min.js"></script>
<script src="assets/vendor/quill/quill.min.js"></script>
<script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
<script src="assets/vendor/tinymce/tinymce.min.js"></script>
<script src="assets/vendor/php-email-form/validate.js"></script>

<!-- Template Main JS File -->
<script src="assets/js/main.js"></script>
<!-- ... (existing HTML code) ... -->

<style>
  /* Define the loading spinner animation */
  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }

    100% {
      transform: rotate(360deg);
    }
  }

  .loading-spinner {
    border: 6px solid rgba(0, 0, 0, 0.1);
    border-top: 6px solid #000;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite;
    margin-bottom: 10px;
  }

  .loading-text {
    font-size: 18px;
    font-weight: bold;
  }

  .progress-text {
    font-size: 16px;
  }
</style>
<script>
  // Get reference to the file input element and drop zone

  // Function to handle selected files
  document.addEventListener('DOMContentLoaded', function () {
    const fileInput = document.getElementById('file-input');
    const dropZone = document.getElementById('drop-zone');
    const consoleDataDiv = document.getElementById('console-data');
    const dropzonescontainer = document.getElementById('drop-zones-container')

    // Listen for click event on the drop zone to trigger file selection
    dropZone.addEventListener('click', (event) => {
      event.preventDefault();
      const clickEvent = new MouseEvent('click', {
        bubbles: true,
        cancelable: true,
        view: window
      });
      fileInput.dispatchEvent(clickEvent);
    });

    // Listen for file selection event
    fileInput.addEventListener('change', (event) => {
      handleFiles(event.target.files);
    });

    function handleFiles(files) {
      if (files.length > 0) {
        const formData = new FormData();
        formData.append('files', files[0]);

        const reader = new FileReader();

        reader.onload = function (e) {
          const embedElement = document.createElement('embed');
          embedElement.setAttribute('src', e.target.result);
          embedElement.setAttribute('type', 'application/pdf');
          embedElement.setAttribute('width', '100%');
          embedElement.setAttribute('height', '500px');

          // Clear drop-zones-container and append the embed element
          dropzonescontainer.innerHTML = '';
          dropzonescontainer.appendChild(embedElement);
        };

        reader.readAsDataURL(files[0]);

        // Show loading state
        consoleDataDiv.innerHTML = '<div class="d-flex justify-content-center"> <div class="loading-spinner"></div><p class="loading-text">Analysing PDF file...</p></div>';

        fetch('https://api.ocr.buildint.co/upload', {
          method: 'POST',
          body: formData
        })
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.json();
          })
          .then(data => {
            console.log('File uploaded successfully:', data);
            // Generate HTML content for the console-data div
            const htmlContent = generateHTMLContent(data[0]);
            consoleDataDiv.innerHTML = htmlContent;
          })
          .catch(error => {
            console.error('There was a problem with the file upload:', error);
            consoleDataDiv.innerHTML = '<p>Error uploading file. Please try again.</p>';
          });
      }
    }

    function generateHTMLContent(data) {
      let htmlContent = '';
      for (const key in data) {
        if (data.hasOwnProperty(key)) {
          let value = data[key];
          value = value == "" ? "-" : value;
          // Create heading and display value below it
          htmlContent += `<div class="col-4 mb-4">
          <h2 style="color: #000; font-family: Inter; font-size: 14px; font-style: normal; font-weight: 500;
          line-height: 18px; /* 128.571% */">${key}</h2> <div style="border-radius: 4px;border: 0.5px solid rgba(165, 165, 169, 0.50);"><p  class="pt-2 ps-2" style="color: var(--Label-H-Tag, #666);font-family: Inter;font-size: 16px;font-style: normal;font-weight: 400;line-height: normal;">${value}</p></div></div>`;
        }
      }
      return htmlContent;
    }

  });
</script>

</body>

</html>